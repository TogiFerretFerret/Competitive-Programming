#include <algorithm>
#include <iostream>
#include <string>
using namespace std;
#define MOD 1000000007
#define MAXN 1000001
 
int fact[MAXN];
 
int mul(int a, int b) { return (((long long)a) * b) % MOD; }
 
void computeFactorials() {
	fact[0] = 1;
	for (int i = 1; i <= MAXN; i++) fact[i] = mul(fact[i - 1], i);
}
 
int bexp(int a, long long e) {
	// Computes (a^e) % MOD using binary exponentiation.
	// Parameters:
	//   a: The base.
	//   e: The exponent.
	// Returns:
	//   The value of (a^e) % MOD.
	if (e == 0) return 1;
	int ans = bexp(a, e / 2);
	ans = mul(ans, ans);
	if (e % 2) ans = mul(ans, a);
	return ans;
}
 
int bexp(int a) { return bexp(a, MOD - 2); }
 
int binom(int n, int k) {
	int ans = fact[n];
	ans = mul(ans, bexp(fact[k],MOD-2));
	ans = mul(ans, bexp(fact[n - k],MOD-2));
	return ans;
}
 
int main() {
	int N, K;
	long long L;
	cin >> K >> N >> L;
	computeFactorials();
	string s;
	cin >> s;
	int req = 0;
	int ans = 1;
	for (int i = 0; i < N; i++) {
		if (s[i] == 'M') {
			ans = mul(ans, binom(req + K, K));
			req += K;
		} else req--;
	}
	cout << bexp(ans, L) << '\n';
}




